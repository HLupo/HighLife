import Head from "next/head";
import type { NextPage } from "next";
import { TodoList } from "~/components/todo/todolist";
import { useTodoPage } from "~/hooks/pages/useTodoPage";

export const TodoPage: NextPage = () => {
  const { setTitle, setDescription, title, description, mutate, isCreating } =
    useTodoPage();

  return (
    <>
      <Head>
        <title>Todo</title>
        <meta name="description" content="Generated by create-t3-app" />{" "}
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main>
        <TodoList />
        <div className="flex w-[50%] flex-col gap-1 p-4">
          <input
            type="text"
            placeholder="Title"
            className="border border-slate-400"
            value={title}
            onChange={(e) => setTitle(e.target.value)}
            disabled={isCreating}
          />
          <input
            type="text"
            placeholder="Description"
            className="border border-slate-400"
            value={description}
            onChange={(e) => setDescription(e.target.value)}
            disabled={isCreating}
          />
          <button onClick={() => mutate({ title, description })}>
            {isCreating ? "Creating..." : "Create"}
          </button>
        </div>
      </main>
    </>
  );
};

export default TodoPage;
